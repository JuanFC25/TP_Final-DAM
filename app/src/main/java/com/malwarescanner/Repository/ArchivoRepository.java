package com.malwarescanner.Repository;


import android.content.Context;
import android.content.Intent;


import androidx.room.Room;

import com.malwarescanner.Modelo.AnalisisArchivo;
import com.malwarescanner.db.MyDatabase;
import com.malwarescanner.interfaces.DaoInterface;

import java.util.List;

public class ArchivoRepository {

    private static ArchivoRepository _REPO=null;
    private DaoInterface daoInterface;

    private ArchivoRepository(Context ctx){
        MyDatabase db = Room.databaseBuilder(ctx, MyDatabase.class, "DAM-PRY-2023").fallbackToDestructiveMigration().build();
        daoInterface= db.daoInterface();
    }

    public static ArchivoRepository getInstance(Context ctx){
        if (_REPO==null) _REPO=new ArchivoRepository(ctx);
        return _REPO;
    }

    public Long insertarScan(AnalisisArchivo archivo){
       return daoInterface.insertarScan(archivo);
    }

    public List<AnalisisArchivo> obtenerDetecciones(){
        return daoInterface.obtenerDetecciones();
    }

    public void borrarAnalisis(AnalisisArchivo archivo){
        daoInterface.borrarAnalisis(archivo);
    }

    public void borrarTodosLosAnalisis(){
        daoInterface.borrarTodosLosAnalisis();
    }

    public void modificarArchivo(AnalisisArchivo archivo) {
        daoInterface.modificarArchivo(archivo);
    }
}
